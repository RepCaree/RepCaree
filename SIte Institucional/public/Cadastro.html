<!DOCTYPE html>
<html lang="pt_br">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="../public/CSS/Tela de cadastro.css">
  <link rel="shortcut icon" href="../public/IMG/Home fundo/icone.ico" type="image/x-icon">
  <link rel="stylesheet" href="Tela de cadastro.css">
  <title>Cadastre-se</title>


</head>

<body>
  <div class="voltar">
    <a href="HomePage.html"> <img src=".\IMG\Cadastro\seta-direita.png"> </a>
  </div>
  <div id="card_concluido" class="card_concluido" style="display: none;">
    <span id="concluído"></span>
  </div>
  <section class="section_flex">
    <div class="cards">
      <h3>CRIE SUA CONTA</h3>
      <br>
      <span for="" style="position: relative; right: 184px;">Email</span>
      <input class="Input" type="text" placeholder="Email@email.com" id="E_email">
      <div id="mensagemErroEmail" class="invalido"></div>
      <br>
      <span for="" style="position: relative; right: 145px;">Nome Completo</span>
      <input class="Input" type="text" placeholder="Nome Completo" id="N_nome">
      <div id="mensagemErroNome" class="invalido"></div>
      <br>
      <span for="" style="position: relative; right: 180px;">Senha</span>
      <input class="Input" type="password" placeholder="Senha" id="S_senha">
      <div id="mensagemErroSenha" class="invalido"></div>
      <br>
      <span for="" style="position: relative; right: 143px;">Confirmar Senha</span>
      <input class="Input" type="password" placeholder="Confirmar senha" id="CS_confirmarsenha">
      <div id="mensagemErroSenha" class="invalido"></div>
      <br>
      <br>
      <button onclick="Cadastrar()">
        Criar conta</button>

      <p> Já tem conta?
        <a href="Login.html"> Login</a>
      </p>

    </div>
  </section>

</body>
</html>

<script>
  function Cadastrar() {
    const user = N_nome.value.trim();
    const email = E_email.value.trim();
    const senha = S_senha.value;
    const confirmarsenha = CS_confirmarsenha.value;

    if (user == "") {
      mensagemErroNome.innerHTML = "<center>Nome inválido</center>";
    } else if (email.indexOf("@") == -1 || email.length < 8 || email.indexOf(".") == -1 || email == "") {
      mensagemErroEmail.innerHTML = "<center>Email inválido</center>";
    } else if (senha !== confirmarsenha) {
      mensagemErroSenha.innerHTML = "<center>As senhas não coincidem</center>";
    } else if (senha.length >= 8 || senha.indexOf("!") !== -1 ||
      senha.indexOf('@') !== 1 ||
      senha.indexOf('#') !== 1 ||
      senha.indexOf('$') !== 1 ||
      senha.indexOf('%') !== 1 ||
      senha.indexOf('&') !== 1 ||
      senha.indexOf('*') !== 1 ||
      senha.ToUpperCase !== -1) {
      for (let numero = 0; numero <= 9; numero++) {
        if (senha.indexOf(numero) !== -1) {
          card_concluido.style.display = 'block'
          concluído.innerHTML = ` Cadastro concluído  com sucesso redirecionando para tela de Login`
          setTimeout(() => { window.location = "Login.html" }, "2500")
          setInterval(sumirMensagem, 2500);
          finalizarMensagem();
          return false;
          function sumirMensagem() {
            card_concluido.style.display = 'none';
          }
        }
      }
    } else {
      mensagemErroSenha.innerHTML = "<center>A senha deve conter pelo menos 8 caracteres, uma letra maiúscula e um número</center>"
    }

  }
</script>